#!/bin/bash

# Author : Diego Lago <diego.lago.gonzalez@gmail.com>
# Version: 0.1
# Date   : 2015-05-11
# Home   : https://github.com/diegolagoglez/console-colors
# License: GPLv3 (See LICENSE)

colors=(black red green yellow blue purple cyan gray dark-gray light-red light-green light-yellow light-blue light-purple light-cyan white)

colors_abbrs=(k r g y b p c g dg lr lg ly lb lp lc w)

attrs=(normal bold dim underline strike inverted hidden)

attrs_abbrs=(n b d u s i h)

function getColorCode() {
	case "$1" in
		black|k) echo "30" ;;
		red|r) echo "31" ;;
		green|g) echo "32" ;;
		yellow|y) echo "33" ;;
		blue|b) echo "34" ;;
		purple|p) echo "35" ;;
		cyan|c) echo "36" ;;
		gray|gr) echo "37" ;;
		dark-gray|dg) echo "90" ;;
		light-red|lr) echo "91" ;;
		light-green|lg) echo "92" ;;
		light-yellow|ly) echo "93" ;;
		light-blue|lb) echo "94" ;;
		light-purple|lp) echo "95" ;;
		light-cyan|lc) echo "96" ;;
		white|w) echo "97" ;;
		reset|x) echo "0" ;;
		*) echo "0" ;;
	esac
}

function getColorAttrCode() {
	case "$1" in
		normal|n) echo "0" ;;
		bold|b) echo "1" ;;
		dim|d) echo "2" ;;
		underline|u) echo "4" ;;
		strike|s) echo "9" ;;
		inverted|i) echo "7" ;;
		hidden|h) echo "8" ;;
		*) echo "0" ;;
	esac
}

CONSOLE_COLORS_ENABLE=1

function enable_colors() {
	CONSOLE_COLORS_ENABLE=1
}

function disable_colors() {
	CONSOLE_COLORS_ENABLE=0
}

function disable_colors_if_no_tty() {
	if [ ! -t 1 ]; then
		disable_colors
	fi
}

function color() {
	[ $CONSOLE_COLORS_ENABLE != 0 ] && echo -ne "\e[$(getColorAttrCode $2);$(getColorCode $1)m"
}

function c() {
	color "$@"
}

function pcolor() {
	# There is no 'echo -e' (no escape character interpretation) because
	# that should be done by the prompt (PS1, PS2, PS3 and PS4).
	[ $CONSOLE_COLORS_ENABLE != 0 ] && echo -n "\[\e[$(getColorAttrCode $2);$(getColorCode $1)m\]"
}

function pc() {
	pcolor "$@"
}

if [ $(basename -- $0) == "console-colors" ]; then
	echo "ERROR: Please, source this file instead of executing it." 1>&2 && exit 1
fi
